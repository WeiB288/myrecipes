<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Recipe Dashboard - Wei's Kitchen</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* Add these styles to your <style> block */
header {
    position: relative; /* Needed for the overlay */
    background-image: url('header.jpg'); /* Your background image */
    background-size: cover;
    background-position: center;
    color: white; /* Ensure text is white for better contrast */
}

/* This creates a semi-transparent overlay for better text readability */
header::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.5); /* Adjust opacity (0.0 to 1.0) as needed */
    z-index: 1; /* Places overlay below the text but above the background image */
}

/* Ensure header content is above the overlay */
header .container {
    position: relative;
    z-index: 2;
}

header h1 {
    font-family: 'Dancing Script', cursive;
    font-weight: 700; /* Or 400, depending on the style you prefer */
    /* text-shadow: 1px 1px 3px rgba(0,0,0,0.7); Optional: adds a subtle shadow for more pop */
}

header p {
    font-family: 'Dancing Script', cursive; /* Applying to the paragraph too, or keep 'Inter' if preferred */
    font-weight: 400;
     /* text-shadow: 1px 1px 2px rgba(0,0,0,0.7); Optional */
}
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Light blue-gray background */
        }
        .recipe-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            height: 100%; /* Ensure cards in a row are same height */
            display: flex;
            flex-direction: column;
        }
        .recipe-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .recipe-card-content {
            flex-grow: 1; /* Allows content to fill space */
            display: flex;
            flex-direction: column;
        }
        .recipe-card-description {
            flex-grow: 1;
        }
        .recipe-detail-view {
            animation: fadeIn 0.5s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Custom checkbox style */
        .custom-checkbox:checked + label:before {
            background-color: #4F46E5; /* Indigo */
            border-color: #4F46E5;
        }
        .custom-checkbox:checked + label:after {
            content: '\2713'; /* Checkmark */
            position: absolute;
            left: 4px;
            top: 0px;
            color: white;
            font-size: 14px;
        }
        label:before {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #CBD5E0; /* Cool gray */
            border-radius: 4px;
            margin-right: 10px;
            vertical-align: middle;
            position: relative;
        }
        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #e5e7eb; /* Lighter gray for track */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #9ca3af; /* Medium gray for thumb */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #6b7280; /* Darker gray on hover */
        }
        .category-title {
            font-size: 1.75rem; /* text-2xl is 1.5rem, making it a bit larger */
            font-weight: 600; /* semibold */
            color: #374151; /* gray-700 */
            margin-bottom: 1rem; /* mb-4 */
            padding-bottom: 0.5rem; /* pb-2 */
            border-bottom: 2px solid #6ee7b7; /* emerald-300 */
        }
    </style>
</head>
<body class="text-gray-800">

    <header class="text-white py-8 shadow-lg"> 
    <div class="container mx-auto px-6 text-center">
        <h1 class="text-5xl md:text-6xl font-bold tracking-tight">Wei's Kitchen Adventures</h1> 
        <p class="mt-2 text-2xl md:text-3xl opacity-90">Your personal collection of culinary delights</p> 
    </div>
</header>

    <nav id="categoryNav" class="bg-white py-3 shadow-md sticky top-0 z-40">
    <div class="container mx-auto px-6 flex justify-center space-x-2 sm:space-x-4">
        <button data-category="Breakfast" class="nav-button text-gray-600 hover:text-green-700 hover:bg-green-50 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 font-medium px-3 py-2 sm:px-4 rounded-lg text-sm sm:text-base transition-colors duration-150">
            üç≥ Breakfast
        </button>
        <button data-category="Salads" class="nav-button text-gray-600 hover:text-green-700 hover:bg-green-50 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 font-medium px-3 py-2 sm:px-4 rounded-lg text-sm sm:text-base transition-colors duration-150">
        ü•ó Salads
        </button>
        <button data-category="Dinner" class="nav-button text-gray-600 hover:text-green-700 hover:bg-green-50 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 font-medium px-3 py-2 sm:px-4 rounded-lg text-sm sm:text-base transition-colors duration-150">
            üç≤ Dinner
        </button>
        <button data-category="Dessert" class="nav-button text-gray-600 hover:text-green-700 hover:bg-green-50 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 font-medium px-3 py-2 sm:px-4 rounded-lg text-sm sm:text-base transition-colors duration-150">
        üç® Dessert
    </button>
        </div>
</nav>

    <main class="container mx-auto p-4 md:p-8">
        <div id="homepageView">
            <div id="recipeCategoriesContainer">
                </div>
        </div>

        <div id="recipeDetailView" class="hidden bg-white p-6 md:p-8 rounded-xl shadow-2xl recipe-detail-view max-w-4xl mx-auto">
            <button id="backButton" class="mb-6 bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-150 ease-in-out inline-flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
                </svg>
                Back to Recipes
            </button>
            <div id="recipeDetailContent">
                </div>
        </div>
    </main>

    <footer class="text-center py-8 mt-12 text-gray-600 border-t border-gray-300">
        <p>&copy; <span id="currentYear"></span> Recipe Dashboard. Happy Cooking!</p>
    </footer>

    <script>
        // --- DATA ---
        const recipeData = [
            {
                id: "miso-salmon",
                name: "Miso Soy Glazed Salmon",
                category: "Dinner",
                image: "Miso Soy Glazed Salmon.jpg",
                placeholderImage: "https://placehold.co/600x400/f87171/ffffff?text=Miso+Salmon",
                description: "Fresh, bold flavors with a beautiful glaze that caramelizes wonderfully.",
                yields: "2-4 servings",
                prepTime: "10 min", // Updated
                cookTime: "12-18 min", // Updated
                ingredients: [
                    { item: "Salmon fillets (150-200g each)", quantity: "300-800g total" },
                    { item: "White or yellow miso paste", quantity: "60g" },
                    { item: "Low sodium soy sauce", quantity: "45g (3 tbsp)" },
                    { item: "Mirin", quantity: "30g (2 tbsp)" },
                    { item: "Rice vinegar", quantity: "15g (1 tbsp)" },
                    { item: "Fresh ginger, grated", quantity: "10g" },
                    { item: "Garlic, minced", quantity: "5g (1 clove)" },
                    { item: "Sesame oil", quantity: "5g (1 tsp)" },
                    { item: "Optional: Toasted sesame seeds", quantity: "for garnish" },
                    { item: "Optional: Sliced green onions", quantity: "for garnish" },
                    { item: "Optional: Honey or maple syrup", quantity: "10g" }
                ],
                equipment: ["Baking sheet", "Parchment paper/foil", "Small bowl"],
                instructions: [
                    "Preheat oven to 200¬∞C (400¬∞F). Line baking sheet. Pat salmon dry.",
                    "Whisk glaze ingredients until smooth.",
                    "Place salmon on sheet. Spoon glaze over.",
                    "Bake 12-18 mins. Internal temp 50-55¬∞C (125-130¬∞F) for medium-rare.",
                    "Rest salmon a few minutes.",
                    "Serve garnished if desired."
                ],
                tips: [
                    "Serving Suggestions: Steamed asparagus, saut√©ed spinach, cauliflower rice.",
                    "Ensure space between fillets.",
                    "White/yellow miso is milder.",
                    "Fresh ginger/garlic is best.",
                    "Optional: Marinate 15-30 mins."
                ]
            },
            {
                id: "white-fish-artichoke",
                name: "Pan-Seared White Fish with Artichokes & Sun-Dried Tomatoes",
                category: "Dinner",
                image: "Pan-Seared White Fish with Artichokes & Sun-Dried Tomatoes.jpg",
                placeholderImage: "https://placehold.co/600x400/60a5fa/ffffff?text=White+Fish",
                description: "A restaurant-quality dish, fresh, fast, and full of Mediterranean sunshine.",
                yields: "2-4 servings",
                prepTime: "15 min", // Updated
                cookTime: "20-25 min", // Updated
                ingredients: [
                    { item: "Firm white fish fillets (cod, halibut), 2.5cm thick", quantity: "450-680g" },
                    { item: "Olive oil", quantity: "30ml (2 tbsp)" },
                    { item: "Kosher Salt", quantity: "5g (1 tsp), or to taste" },
                    { item: "Black Pepper", quantity: "2g (0.5 tsp), or to taste" },
                    { item: "Unsalted butter, divided", quantity: "30g (2 tbsp)" },
                    { item: "Fresh Oregano Sprigs", quantity: "2-3 sprigs" },
                    { item: "Chopped Fresh Oregano", quantity: "15g (1 tbsp)" },
                    { item: "Frozen Artichoke Hearts, thawed, chopped", quantity: "250g" },
                    { item: "Shallot, small, thinly sliced", quantity: "1 (50g)" },
                    { item: "Oil-Packed Sun-Dried Tomatoes, drained, chopped", quantity: "75g" },
                    { item: "Dry White Wine", quantity: "120ml (0.5 cup)" },
                    { item: "Baby Spinach", quantity: "60g (2 cups)" }
                ],
                equipment: ["Large non-stick skillet", "Fish spatula"],
                instructions: [
                    "Pat fish dry. Season with salt/pepper.",
                    "Heat oil (medium-high). Sear fish 3-4 mins on first side.",
                    "Flip, sear 1-2 mins. Add 15g butter & oregano sprigs. Baste 1 min.",
                    "Remove fish, tent with foil. Discard sprigs.",
                    "Medium heat. Saut√© artichokes & shallot 3-4 mins.",
                    "Stir in chopped oregano & sun-dried tomatoes. Cook 1 min. Deglaze with wine, reduce by half.",
                    "Stir in remaining 15g butter. Add spinach, cook 1-2 mins until wilted.",
                    "Serve veggies, top with fish. Drizzle pan sauce."
                ],
                tips: ["Don't overcrowd pan.", "Basting adds flavor."]
            },
            {
                id: "mediterranean-beef-stir-fry",
                name: "Sunshine Mediterranean Ground Beef & Zucchini Stir-Fry",
                category: "Dinner",
                image: "Sunshine Mediterranean Ground Beef & Zucchini Stir-Fry.jpg",
                placeholderImage: "https://placehold.co/600x400/34d399/ffffff?text=Beef+Stir-fry",
                description: "A vibrant, fresh, and flavorful Mediterranean stir-fry.",
                yields: "2-4 servings",
                prepTime: "20 min", // Updated
                cookTime: "20-25 min", // Updated
                ingredients: [
                    { item: "Lean Ground Beef", quantity: "450g" },
                    { item: "Extra Virgin Olive Oil", quantity: "30ml (2 tbsp)" },
                    { item: "Yellow Onion, chopped", quantity: "1 medium (150g)" },
                    { item: "Garlic, minced", quantity: "3 cloves (15g)" },
                    { item: "Red Bell Pepper, chopped", quantity: "1 medium (150g)" },
                    { item: "Zucchini, diced 2cm", quantity: "2 medium (400g)" },
                    { item: "Cherry Tomatoes, halved", quantity: "300g" },
                    { item: "Ground Cumin", quantity: "5g (1 tsp)" },
                    { item: "Dried Oregano", quantity: "5g (1 tsp)" },
                    { item: "Sweet Paprika", quantity: "5g (1 tsp)" },
                    { item: "Red Pepper Flakes (optional)", quantity: "1-2g (0.25-0.5 tsp)" },
                    { item: "Kalamata Olives, pitted, halved", quantity: "80g" },
                    { item: "Fresh Lemon Juice", quantity: "15ml (1 tbsp)" },
                    { item: "Fresh Parsley, chopped", quantity: "20g" },
                    { item: "Kosher Salt", quantity: "to taste" },
                    { item: "Black Pepper", quantity: "to taste" },
                    { item: "Feta Cheese (optional garnish)", quantity: "30-50g" }
                ],
                equipment: ["Large skillet or wok", "Spatula"],
                instructions: [
                    "Prep ingredients.",
                    "Heat 1 tbsp oil (medium-high). Brown beef (5-7 mins). Drain. Set aside.",
                    "Add 1 tbsp oil. Saut√© onion & bell pepper (3-4 mins). Add garlic, cook 1 min.",
                    "Add zucchini & spices. Cook 4-5 mins.",
                    "Add tomatoes & olives. Cook 4-6 mins.",
                    "Return beef. Stir in 15g parsley. Cook 1-2 mins. Season.",
                    "Off heat, stir in lemon juice.",
                    "Serve. Garnish with parsley & feta."
                ],
                tips: ["Prep ingredients first.", "Adjust salt carefully."]
            },
            {
    id: "low-carb-meatballs",
    name: "Low-Carb Meatballs",
    category: "Dinner",
    image: "Low-Carb Meatballs.jpg", // Replace with an actual image filename if you have one
    placeholderImage: "https://placehold.co/600x400/dc2626/ffffff?text=Meatballs", // Red placeholder
    description: "Delicious and easy all-beef low-carb meatballs, perfect with your favorite marinara.",
    yields: "Approx. 24 meatballs",
    prepTime: "20-25 min",
    cookTime: "20-30 min",
    ingredients: [
        { item: "Ground beef (80-85% lean)", quantity: "2 pounds" },
        { item: "Parmesan cheese, grated", quantity: "¬Ω cup" },
        { item: "Heavy cream", quantity: "¬Ω cup" },
        { item: "Large eggs, beaten", quantity: "2" },
        { item: "Minced fresh parsley", quantity: "4 tbsp (¬º cup)" },
        { item: "Finely grated onion (mush-like)", quantity: "2 tbsp" },
        { item: "Medium cloves garlic, grated", quantity: "2 (or 1 large)" },
        { item: "Salt", quantity: "1 teaspoon" },
        { item: "Pepper", quantity: "¬Ω teaspoon" },
        { item: "<strong>Optional for Serving:</strong>", isHeader: true },
        { item: "Low-carb marinara sauce", quantity: "4 cups" },
        { item: "Additional fresh parsley for garnish", quantity: "" },
        { item: "Mozzarella cheese for melting", quantity: "" }
    ],
    equipment: ["Large bowl", "Baking sheet(s)", "Optional: Foil or wire rack"],
    instructions: [
        "Add ground beef to a large bowl and break it up.",
        "Add Parmesan, heavy cream, beaten eggs, parsley, grated onion, garlic, salt, and pepper.",
        "Mix gently until just combined. Do not over-mix.",
        "Lightly oil hands and roll into approx. 24 equal-sized meatballs.",
        "Preheat oven to 400¬∞F (200¬∞C). Line baking sheet(s) with foil or use a wire rack.",
        "Place meatballs in a single layer on the baking sheet(s).",
        "Bake for 15-20 minutes, or until cooked through and browned.",
        "Serve with warmed marinara sauce. Garnish with parsley. Optional: top with mozzarella and broil until melted."
    ],
    tips: [
        "Do not over-mix the meat mixture to keep meatballs tender.",
        "For even cooking, try to make meatballs of a consistent size.",
        "Using foil on the baking sheet makes for easier cleanup."
    ]
},
            {
    id: "homemade-fresh-chorizo",
    name: "Homemade Fresh Chorizo",
    category: "Dinner",
    image: "Homemade Fresh Chorizo.jpg", // Replace with an actual image filename if you have one
    placeholderImage: "https://placehold.co/600x400/ef4444/ffffff?text=Chorizo", // Red-600 placeholder
    description: "Flavorful, fresh Mexican-style chorizo, perfect for tacos, eggs, or any dish needing a savory, spicy kick.",
    yields: "Approx. 1.5 pounds", // The recipe states 2 pounds of meat, but yields is often a bit less after mixing/moisture. The text says "Yields: Approximately 1.5 pounds"
    prepTime: "10-15 min",
    cookTime: "Varies (cook as needed)", // Chorizo is an ingredient, cook time depends on final dish
    ingredients: [
        { item: "Ground pork or beef", quantity: "2 pounds" },
        { item: "Smoked paprika", quantity: "2 tablespoons" },
        { item: "Cayenne pepper", quantity: "1 teaspoon" },
        { item: "Ancho chili powder", quantity: "1 tablespoon" },
        { item: "Guajillo chili powder", quantity: "1 tablespoon" },
        { item: "Crushed garlic", quantity: "2 cloves" }, // Changed from "gloves"
        { item: "Ground cumin", quantity: "1 tablespoon" }, // Changed from "tablesoom"
        { item: "Dried oregano", quantity: "1 teaspoon" },
        { item: "Red wine vinegar", quantity: "2 tablespoons" },
        { item: "Salt (or to taste)", quantity: "1 teaspoon" },
        { item: "Black pepper (or to taste)", quantity: "1 teaspoon" }
    ],
    equipment: ["Large mixing bowl", "Gloves (optional, for mixing)"],
    instructions: [
        "Place ground meat in a large mixing bowl.",
        "Sprinkle all dry seasonings over the meat. Pour red wine vinegar over seasonings.",
        "Using hands (gloves recommended), gently but thoroughly mix all ingredients until uniformly distributed. Do not overmix.",
        "For Immediate Use: Cook right away.",
        "For Later Use: Transfer to an airtight container. Store in refrigerator up to 3-4 days, or freeze up to 3 months. Thaw in refrigerator. Resting for a few hours or overnight enhances flavor."
    ],
    tips: [
        "If using very lean meat, consider adding a tablespoon or two of lard or bacon fat for moisture.",
        "Try not to overmix, as this can make the cooked chorizo tough.",
        "Allowing the chorizo to rest in the refrigerator before cooking helps flavors meld."
    ]
},
            {
                id: "pb-overnight-oats",
                name: "Peanut Butter Overnight Oats",
                category: "Breakfast",
                image: "Peanut Butter Overnight Oats.jpg", 
                placeholderImage: "https://placehold.co/600x400/f59e0b/ffffff?text=Overnight+Oats",
                description: "A quick, easy, and delicious make-ahead breakfast.",
                yields: "3 servings",
                prepTime: "10-15 min", // Updated
                cookTime: "6+ hr chill", // Updated to be concise and remove brackets
                ingredients: [
                    { item: "Unsweetened almond milk (or other)", quantity: "1 1/2 cups" },
                    { item: "Chia seeds", quantity: "2 1/4 Tbsp" },
                    { item: "Natural salted peanut butter (or almond)", quantity: "6 Tbsp (3/8 cup)" },
                    { item: "Maple syrup (or other sweetener)", quantity: "3 Tbsp" },
                    { item: "Gluten-free rolled oats", quantity: "1 1/2 cups" },
                    { item: "Optional Toppings: Banana, berries, flaxseed, granola", quantity: "as desired" }
                ],
                equipment: ["Large bowl or 3 mason jars", "Spoon"],
                instructions: [
                    "Combine almond milk, chia seeds, peanut butter, and maple syrup in bowl/jars. Stir well.",
                    "Add rolled oats, stir ensuring all oats are moistened.",
                    "Cover securely.",
                    "Refrigerate overnight or at least 6 hours.",
                    "Portion if needed. Add toppings before serving.",
                    "Optional: Heat individual servings in microwave (45-60s) or saucepan. Add liquid if too thick."
                ],
                tips: ["Leaving some peanut butter swirls creates nice texture.", "Adjust sweetener to taste.", "Rolled oats are recommended over steel-cut or quick-cooking."]
            },
            {
    id: "steel-cut-oats",
    name: "Make-Ahead Steel-Cut Oats",
    category: "Breakfast",
    image: "Make-Ahead Steel-Cut Oats.jpg", // Replace with an actual image filename if you have one
    placeholderImage: "https://placehold.co/600x400/d2b48c/ffffff?text=Steel-Cut+Oats", // Tan placeholder
    description: "A time-saving method for quick, creamy steel-cut oatmeal, started the night before.",
    yields: "Approx. 4 servings", // Based on 1 cup dry oats
    prepTime: "5 min (active)",    // For toasting and initial prep
    cookTime: "Overnight rest + 5-10 min simmer", // Combines resting and morning simmer
    ingredients: [
        { item: "Butter or olive oil", quantity: "1 teaspoon" },
        { item: "Steel-cut oats", quantity: "1 cup" },
        { item: "Water", quantity: "3 cups" },
        { item: "Salt", quantity: "Pinch" },
        { item: "Milk (optional, for creaminess)", quantity: "1 cup" }
    ],
    equipment: ["2-quart saucepan with lid"],
    instructions: [
        "<strong>The Night Before:</strong>",
        "Toast Oats: Heat butter/oil in saucepan (medium heat). Add steel-cut oats, cook stirring frequently until toasty (~3 min).",
        "Add Water & Salt: Pour in water, add salt. Stir. Bring to a rolling boil.",
        "Cover & Rest: Turn off heat, cover saucepan securely, leave on stovetop overnight.",
        "<strong>The Next Morning:</strong>",
        "Reheat: Uncover. Oats will have absorbed most water. Stir in optional milk if desired for thinner/creamier texture.",
        "Simmer: Bring to a simmer (medium-low heat), stirring occasionally, until warmed through and desired consistency is reached (5-10 min).",
        "Serve: Scoop into bowls and add your favorite toppings."
    ],
    tips: [
        "Using milk in the morning makes the oatmeal creamier.",
        "Adjust simmer time in the morning to reach your preferred oatmeal thickness."
    ]
},
            {
    id: "honey-oat-sourdough",
    name: "Honey Oat Sourdough Bread",
    category: "Breakfast",
    image: "Honey Oat Sourdough Bread.jpg", // Replace with an actual image filename if you have one
    placeholderImage: "https://placehold.co/600x400/f0e68c/ffffff?text=Sourdough+Bread", // Khaki placeholder
    description: "A delightful sourdough bread with added texture and flavor from an oatmeal soaker and honey.",
    yields: "1 Loaf",
    prepTime: "45 min active (3-day process)", // Summarizes the active time and overall duration
    cookTime: "40 min bake",
    ingredients: [
        { item: "<strong>For Oatmeal Soaker:</strong>", isHeader: true },
        { item: "Rolled oats", quantity: "100g" },
        { item: "Warm water", quantity: "105g" },
        { item: "Honey", quantity: "40g" },
        { item: "<strong>For the Dough:</strong>", isHeader: true },
        { item: "Khorasan flour (freshly milled if possible)", quantity: "230g" },
        { item: "All-purpose flour", quantity: "170g" },
        { item: "Water (adjust as needed)", quantity: "220g" },
        { item: "Active sourdough starter (fed)", quantity: "125g" },
        { item: "Salt", quantity: "10g" },
        { item: "Extra virgin olive oil (EVOO)", quantity: "14g" },
        { item: "All of the Oatmeal Soaker", quality: "" }
    ],
    equipment: ["Small bowl (for soaker)", "Large mixing bowl", "Dutch oven", "Banneton or bowl with tea towel"],
    instructions: [
        "<strong>Sourdough Starter Prep (Day Before):</strong> Midday: 10g starter + 20g flour + 20g water. Bedtime: Add 50g flour + 50g water.",
        "<strong>1. Oatmeal Soaker (Morning of baking/1-2 hrs before dough):</strong> Combine oats, hot water, honey. Stir, cover, let sit 1-2 hrs until softened.",
        "<strong>2. Mix Dough (Autolyse):</strong> Combine flours, 220g water, active starter. Mix until shaggy. Cover, rest 30 min - 1 hr.",
        "<strong>3. Add Soaker, Salt, EVOO:</strong> Sprinkle salt, drizzle EVOO over dough. Add oatmeal soaker. Mix thoroughly.",
        "<strong>4. Bulk Fermentation (3-6 hrs):</strong> Perform 3-4 sets of stretch and folds in first 1.5-2 hrs (every 30-45 min). Dough ready when ~30-50% increased volume, airy, bubbles, domed edges.",
        "<strong>5. Final Shaping:</strong> Gently shape into boule or batard on lightly floured surface. Place seam-side up in floured banneton/bowl.",
        "<strong>6. Proofing:</strong> Room temp: 1-3 hrs (25-50% volume increase, poke test). OR Cold proof (Recommended): Fridge 12-24 hrs, covered.",
        "<strong>7. Prepare for Baking:</strong> 45-60 min before baking, preheat oven with Dutch oven (lid on) to 375¬∞F (190¬∞C).",
        "<strong>8. Score and Bake:</strong> Invert dough onto parchment/into hot Dutch oven. Score top. Bake covered 30 min at 375¬∞F (190¬∞C). Remove lid, bake uncovered 10 min more, or until crust is deep golden & internal temp 200-210¬∞F (93-99¬∞C)."
    ],
    tips: [
        "Freshly milled khorasan flour enhances flavor.",
        "Adjust water based on flour absorption for a shaggy, not overly wet, dough.",
        "Cold proofing develops more complex flavors and makes scoring easier."
    ]
},
            {
    id: "cheesecake-factory-brown-bread",
    name: "Cheesecake Factory Brown Sourdough Bread",
    category: "Breakfast",
    image: "Cheesecake Factory Brown Sourdough Bread.jpg", // Replace with an actual image filename if you have one
    placeholderImage: "https://placehold.co/600x400/8B4513/ffffff?text=Brown+Bread", // SaddleBrown placeholder
    description: "A sourdough loaf inspired by the classic restaurant brown bread, with khorasan flour, honey, molasses, and a hint of cocoa.",
    yields: "1 Loaf",
    prepTime: "40 min active (plus fermentation)", // Summarizes active time
    cookTime: "40 min bake",
    ingredients: [
        { item: "Khorasan flour (freshly milled if possible)", quantity: "230g" },
        { item: "All-purpose flour", quantity: "170g" },
        { item: "Water (adjust as needed)", quantity: "250g" },
        { item: "Active sourdough starter (fed)", quantity: "125g" },
        { item: "Salt", quantity: "10g" },
        { item: "Honey", quantity: "20g" },
        { item: "Molasses", quantity: "20g" },
        { item: "Cocoa powder", quantity: "10g" },
        { item: "Extra virgin olive oil (EVOO)", quantity: "20g" }
    ],
    equipment: ["Large mixing bowl", "Bench scraper", "Banneton or bowl with tea towel", "Dutch oven", "Scoring tool", "Wire cooling rack"],
    instructions: [
        "<strong>Sourdough Starter Prep (Day Before):</strong> Midday: 10g starter + 20g flour + 20g water. Bedtime: Add 50g flour + 50g water.",
        "<strong>1. Mix Flours & Water (Autolyse):</strong> Combine khorasan flour, all-purpose flour, 250g water, and active starter. Mix until shaggy. Cover, rest 30 min - 1 hr.",
        "<strong>2. Add Salt, Sweeteners, Cocoa, Oil:</strong> Sprinkle salt & cocoa powder over dough. Drizzle honey, molasses, & EVOO. Mix thoroughly until incorporated.",
        "<strong>3. Bulk Fermentation (3-6 hrs):</strong> Perform 3-4 sets of stretch and folds in first 1.5-2 hrs (every 30-45 min). Dough ready when ~30-50% increased volume, airy, bubbles, domed edges.",
        "<strong>4. Final Shaping:</strong> Gently shape into boule or batard on lightly floured surface. Place seam-side up in floured banneton/bowl.",
        "<strong>5. Proofing:</strong> Room temp: 1-3 hrs (25-50% volume increase, poke test). OR Cold proof (Recommended): Fridge 12-24 hrs, covered.",
        "<strong>6. Prepare for Baking:</strong> 45-60 min before baking, preheat oven with Dutch oven (lid on) to 375¬∞F (190¬∞C).",
        "<strong>7. Score and Bake:</strong> Invert dough onto parchment/into hot Dutch oven. Score top. Bake covered 30 min at 375¬∞F (190¬∞C). Remove lid, bake uncovered 10 min more, or until crust is deep golden & internal temp 200-210¬∞F (93-99¬∞C)."
    ],
    tips: [
        "Freshly milled khorasan flour is recommended for best flavor.",
        "The hint of cocoa powder adds color and depth, not a strong chocolate flavor.",
        "Ensure your sourdough starter is active and bubbly before use."
    ]
},
            {
    id: "asian-slaw",
    name: "Asian Slaw with Ginger-Peanut Dressing",
    category: "Salads",
    image: "Asian Slaw with Ginger-Peanut Dressing.jpg", // Replace with an actual image filename if you have one
    placeholderImage: "https://placehold.co/600x400/a7f3d0/ffffff?text=Asian+Slaw", // Light green placeholder
    description: "A flavorful and crunchy slaw with a delicious homemade ginger-peanut dressing.",
    yields: "Approx. 6-8 servings", // Based on typical slaw recipe size
    prepTime: "20 min",    // For chopping and dressing
    cookTime: "10+ min (sit time)", // For flavors to meld
    ingredients: [
        { item: "<strong>For the Dressing:</strong>", isHeader: true },
        { item: "Honey", quantity: "¬º cup" },
        { item: "Vegetable oil", quantity: "¬º cup" },
        { item: "Unseasoned rice vinegar", quantity: "¬º cup" },
        { item: "Soy sauce", quantity: "1 tablespoon" },
        { item: "Sesame oil", quantity: "1 teaspoon" },
        { item: "Peanut butter", quantity: "1 tablespoon" },
        { item: "Salt", quantity: "Heaping ¬Ω teaspoon" },
        { item: "Sriracha sauce (optional)", quantity: "1 teaspoon" },
        { item: "Minced fresh ginger", quantity: "1 tablespoon" },
        { item: "Large garlic clove, minced", quantity: "1" },
        { item: "<strong>For the Slaw:</strong>", isHeader: true },
        { item: "Prepared shredded coleslaw mix", quantity: "4 cups" },
        { item: "Prepared shredded carrots", quantity: "2 cups" },
        { item: "Red bell pepper, thinly sliced", quantity: "1" },
        { item: "Cooked and shelled edamame", quantity: "1 cup" },
        { item: "Medium scallions, finely sliced", quantity: "2" },
        { item: "Chopped salted peanuts", quantity: "¬Ω cup" },
        { item: "Loosely packed chopped fresh cilantro", quantity: "¬Ω cup" }
    ],
    equipment: ["Medium bowl (for dressing)", "Large mixing bowl (for slaw)", "Whisk"],
    instructions: [
        "Make Dressing: In a medium bowl, whisk together all dressing ingredients until peanut butter is dissolved. Set aside.",
        "Combine Slaw: In a large mixing bowl, combine all slaw ingredients.",
        "Dress Slaw: Pour dressing over slaw and toss well to coat evenly.",
        "Let Sit: Allow slaw to sit for at least 10 minutes before serving for flavors to meld.",
        "Taste & Adjust: Taste and adjust seasoning if necessary (e.g., more salt).",
        "Serve cold."
    ],
    tips: [
        "Dressing can be made up to 2 days ahead and stored in the fridge.",
        "Slaw is best served fresh but leftovers keep for a few days refrigerated."
    ]
},
            {
    id: "salmon-poke-bowl",
    name: "Salmon Poke Bowl",
    category: "Salads",
    image: "Salmon Poke Bowl.jpg", // Replace with an actual image filename if you have one
    placeholderImage: "https://placehold.co/600x400/f472b6/ffffff?text=Poke+Bowl", // Pink placeholder
    description: "A delicious and customizable salmon poke bowl with fresh, sashimi-grade salmon.",
    yields: "Approx. 2-4 bowls", // Depends on serving size
    prepTime: "20-25 min (plus rice cooking)",
    cookTime: "N/A (salmon is raw)",
    ingredients: [
        { item: "<strong>Important:</strong> Use sashimi-grade salmon", isHeader: true },
        { item: "<strong>For the Salmon Poke:</strong>", isHeader: true },
        { item: "Sashimi-grade salmon, skinless, boneless", quantity: "1 lb" },
        { item: "Green onions, thinly sliced", quantity: "2" },
        { item: "<strong>For the Sauce:</strong>", isHeader: true },
        { item: "Soy sauce", quantity: "4 tablespoons" },
        { item: "Rice vinegar", quantity: "2 tablespoons" },
        { item: "Sriracha (adjust to taste)", quantity: "2 tablespoons" },
        { item: "Maple syrup (or honey)", quantity: "2 tablespoons" },
        { item: "Sesame oil", quantity: "2 tablespoons" },
        { item: "Garlic, finely grated", quantity: "2 cloves" },
        { item: "Ginger, finely grated", quantity: "2 teaspoons" },
        { item: "Salt", quantity: "¬Ω teaspoon" },
        { item: "<strong>For Assembling the Bowls:</strong>", isHeader: true },
        { item: "Cooked white rice (sushi rice ideal)", quantity: "4 cups" },
        { item: "<strong>Optional Toppings:</strong>", isHeader: true },
        { item: "Edamame, cooked and shelled", quantity: "1 cup" },
        { item: "Salad greens (or coleslaw mix, purple cabbage)", quantity: "2 cups" },
        { item: "Large avocado, cubed", quantity: "1" },
        { item: "Furikake or toasted sesame seeds", quantity: "for garnish" }
    ],
    equipment: ["Sharp knife", "Cutting board", "Medium bowl (for salmon)", "Small bowl (for sauce)", "Whisk", "Fishbone tweezers (optional)"],
    instructions: [
        "Prepare Salmon: Remove any skin/bones. Cut salmon into ¬Ω-inch cubes. Place in a medium bowl.",
        "Make Sauce: In a small bowl, whisk together all sauce ingredients until combined.",
        "Dress Salmon: Add sliced green onions to salmon. Pour about half the sauce over. Gently mix to coat. Taste and add more sauce if desired. Reserve remaining sauce.",
        "Assemble Bowls: Divide cooked rice among serving bowls. Arrange salmon poke on top.",
        "Add desired toppings (edamame, greens, avocado).",
        "Garnish with furikake or sesame seeds. Serve immediately with remaining sauce on the side."
    ],
    tips: [
        "CRITICAL: Only use sashimi-grade salmon from a reputable source suitable for raw consumption.",
        "Be gentle when mixing the salmon to avoid breaking up the pieces.",
        "Customize toppings to your preference."
    ]
},
            {
    id: "grilled-shrimp-bowl",
    name: "Grilled Shrimp Bowl with Avocado, Corn Salsa & Creamy Sauce",
    category: "Salads",
    image: "grilled-shrimp-bowl.jpg", // Replace with an actual image filename if you have one
    placeholderImage: "https://placehold.co/600x400/22c55e/ffffff?text=Shrimp+Bowl", // Green placeholder
    description: "A vibrant bowl with grilled shrimp, fresh corn salsa, creamy avocado, and a tangy sauce over rice.",
    yields: "2-4 bowls", // Estimated, adjust as needed
    prepTime: "25-30 min", // Includes chopping for salsa and sauce
    cookTime: "5-10 min (shrimp)", // Excludes rice cooking time
    ingredients: [
        { item: "<strong>For the Shrimp:</strong>", isHeader: true },
        { item: "Large shrimp, peeled and deveined", quantity: "1 lb" },
        { item: "Extra Virgin Olive oil", quantity: "1 tablespoon" },
        { item: "Paprika", quantity: "1 teaspoon" },
        { item: "Garlic powder", quantity: "1/2 teaspoon" },
        { item: "Salt", quantity: "1/4 teaspoon" },
        { item: "Black pepper", quantity: "1/4 teaspoon" },
        { item: "Cayenne pepper (optional)", quantity: "1/4 teaspoon" },
        { item: "<strong>For the Corn Salsa:</strong>", isHeader: true },
        { item: "Frozen corn, thawed", quantity: "1 cup" },
        { item: "Diced red onion", quantity: "1/2 cup" },
        { item: "Chopped cilantro", quantity: "1/4 cup" },
        { item: "Jalape√±o, seeded and minced (optional)", quantity: "1" },
        { item: "Lime, juiced", quantity: "1" },
        { item: "Salt to taste", quantity: "" },
        { item: "<strong>For the Creamy Sauce:</strong>", isHeader: true },
        { item: "Mayonnaise", quantity: "1/2 cup" },
        { item: "Sour cream", quantity: "1/4 cup" },
        { item: "Chopped cilantro", quantity: "1 tablespoon" },
        { item: "Lime juice", quantity: "1 tablespoon" },
        { item: "Garlic, minced", quantity: "1 clove" },
        { item: "Salt", quantity: "1/4 teaspoon" },
        { item: "Black pepper", quantity: "1/4 teaspoon" },
        { item: "<strong>For the Bowl Assembly:</strong>", isHeader: true },
        { item: "Cooked rice or Black Beans", quantity: "As needed" },
        { item: "Avocado, sliced", quantity: "1" },
        { item: "Sesame seeds, for garnish", quantity: "" },
        { item: "Chopped green onions, for garnish", quantity: "" }
    ],
    equipment: ["Bowl (for shrimp)", "Bowl (for salsa)", "Small bowl (for sauce)", "Grill or grill pan", "Whisk"],
    instructions: [
        "Prep Shrimp: In a bowl, combine shrimp, olive oil, paprika, garlic powder, salt, pepper, and cayenne (if using). Toss to coat.",
        "Make Corn Salsa: Combine corn, red onion, jalape√±o (if using), cilantro, lime juice, and salt in a bowl. Mix gently and set aside.",
        "Make Creamy Sauce: In a small bowl, whisk together mayonnaise, sour cream, cilantro, lemon juice, minced garlic, salt, and pepper.",
        "Grill Shrimp: Grill shrimp over medium heat for 2-3 minutes per side, or until cooked through.",
        "Assemble Bowls: Divide cooked rice among bowls. Top with grilled shrimp, corn salsa, avocado slices, and drizzle with Creamy Sauce. Garnish with sesame seeds and chopped green onions."
    ],
    tips: [
        "Spice it up: Add more cayenne pepper or a pinch of red pepper flakes to the shrimp marinade.",
        "Make it a meal: Serve the bowls with a side salad or soup (though it's quite a meal on its own!)."
    ]
},
            {
    id: "keto-custard-ice-cream",
    name: "Keto Custard Ice Cream (Vanilla Base & Variations)",
    category: "Dessert",
    image: "Keto Custard Ice Cream.jpg", // Replace with an actual image filename if you have one
    placeholderImage: "https://placehold.co/600x400/f3e8ff/000000?text=Keto+Ice+Cream", // Light purple placeholder
    description: "Rich, creamy, keto-friendly custard ice cream. Base vanilla recipe with decadent chocolate and robust coffee variations. Designed for Ninja Creami.",
    yields: "Approx. 1 to 1.5 quarts (makes 1 pint of base, then cream is added)",
    prepTime: "20-30 min active",
    cookTime: "12-24 hr freeze time",
    ingredients: [
        { item: "<strong>Base Vanilla Custard Ingredients (makes base for 1 pint):</strong>", isHeader: true },
        { item: "Large egg yolks", quantity: "3" },
        { item: "Half-and-half", quantity: "1 ¬Ω cups" },
        { item: "Allulose (or preferred keto sweetener)", quantity: "‚Öì cup (adjust to taste)" },
        { item: "Salt", quantity: "¬º teaspoon" },
        { item: "Vanilla bean paste (or vanilla extract)", quantity: "1 teaspoon" },
        { item: "<strong>To Add Before Churning (per pint of frozen base):</strong>", isHeader: true },
        { item: "Cold heavy cream", quantity: "¬º to ¬Ω cups (fill to max line)" },
        { item: "<strong>For Chocolate Variation (Custard Base Changes):</strong>", isHeader: true },
        { item: "Use large egg yolks", quantity: "2 (instead of 3 for vanilla base)" },
        { item: "Unsweetened cocoa powder", quantity: "¬º cup (add to custard base mixture)" },
        { item: "<strong>For Coffee Variation (Custard Base Changes):</strong>", isHeader: true },
        { item: "Use large egg yolks", quantity: "2 (instead of 3 for vanilla base)" },
        { item: "Instant coffee granules/powder", quantity: "2 teaspoons (add to custard base mixture, adjust to taste)" }
    ],
    equipment: ["Medium saucepan", "Whisk", "Heatproof bowl", "Fine-mesh sieve (optional)", "Ninja Creami pint container(s)", "Ninja Creami machine"],
    instructions: [
        { item: "<strong>Keto Vanilla Custard Ice Cream (Base Recipe for Ninja Creami):</strong>", isHeader: true },
        "1. Prepare Yolks: In a medium heatproof bowl, whisk 3 egg yolks lightly. Set aside.",
        "2. Heat Dairy & Sweetener: In saucepan, combine half-and-half, allulose, and salt. Heat over medium until warm (above 130¬∞F / 54¬∞C), stirring occasionally.",
        "3. Temper Egg Yolks: Slowly pour about ¬Ω cup of the hot half-and-half mixture into the egg yolks, whisking constantly. Pour the tempered yolk mixture back into the saucepan.",
        "4. Cook Custard: Cook over low to medium-low heat, stirring constantly and scraping the bottom of the pan, until the custard thickens enough to coat the back of a spoon (170-180¬∞F or 77-82¬∞C). This can take 5-10 minutes. Do not let it boil.",
        "5. Strain & Add Vanilla to Pint, add cold heavy cream if needed, filling up to the max fill line. Optional: pour the cooked custard through a fine-mesh sieve directly into a Ninja Creami pint container (do not exceed initial fill line for the base). Stir in the vanilla bean paste.",
        "6. Freeze Custard Base: Freeze the pint(s) for at least 12-24 hours, or until completely frozen solid. (Original recipe notes: Avoid covering with a processing lid during initial freezing if it might cause a lump in the center of the Creami container).",
        "7. Churn: Place the pint into the outer bowl, attach the lid with the paddle, and process in the Ninja Creami machine using the 'Ice Cream' or 'Lite Ice Cream' setting. Re-spin if necessary for desired consistency.",
        "<strong>Keto Chocolate Custard Ice Cream Variation:</strong>",
        "Follow Vanilla base recipe steps 1-6 to create and freeze the custard base, with these modifications:",
        " - Use 2 large egg yolks (instead of 3 in Step 1).",
        " - In Step 2 (Heat Dairy & Sweetener): Whisk ¬º cup unsweetened cocoa powder and allulose together with a small amount of the half-and-half in the saucepan to make a smooth paste before adding the rest of the half-and-half and salt. Then proceed with heating the mixture.",
        " - After freezing the chocolate custard base (Steps 5 & 6), proceed to Churning (Steps 7 & 8 from Vanilla recipe): Add cold heavy cream to the frozen chocolate base and churn.",
        "<strong>Keto Coffee Custard Ice Cream Variation:</strong>",
        "Follow Vanilla base recipe steps 1-6 to create and freeze the custard base, with these modifications:",
        " - Use 2 large egg yolks (instead of 3 in Step 1).",
        " - In Step 2 (Heat Dairy & Sweetener): Add 2 teaspoons of instant coffee granules to the saucepan with the half-and-half, allulose, and salt. Stir well to dissolve the coffee as the mixture heats.",
        " - After freezing the coffee custard base (Steps 5 & 6), proceed to Churning (Steps 7 & 8 from Vanilla recipe): Add cold heavy cream to the frozen coffee base and churn."
    ],
    tips: [
        "Ensure custard base is frozen completely solid (at least 12-24 hours) before churning for best Ninja Creami results.",
        "Adjust sweetener and flavorings (vanilla, cocoa, coffee) to your personal preference.",
        "If ice cream is crumbly after the first spin, a re-spin (sometimes with an extra tablespoon or two of heavy cream or milk) is often recommended for Ninja Creami."
    ]
}
        ];

        // --- DOM ELEMENTS ---
        // Ensure these are defined after the DOM is loaded or accessed within DOMContentLoaded
        let recipeCategoriesContainer, homepageView, recipeDetailView, recipeDetailContent, backButton, currentYearSpan, categoryNavElement, navButtons;

        // --- FUNCTIONS ---

        // Function to create a recipe card
        function createRecipeCard(recipe) {
            const card = document.createElement('div');
            card.className = 'recipe-card bg-white rounded-xl shadow-lg overflow-hidden cursor-pointer';
            card.innerHTML = `
                <img src="${recipe.image}" alt="${recipe.name}" class="w-full h-56 object-cover" onerror="this.onerror=null;this.src='${recipe.placeholderImage}';">
                <div class="p-6 recipe-card-content">
                    <h3 class="text-2xl font-semibold text-green-700 mb-2">${recipe.name}</h3>
                    <p class="text-gray-600 text-sm mb-4 recipe-card-description">${recipe.description}</p>
                    <div class="mt-auto">
                         <span class="inline-block bg-gray-100 text-gray-700 text-xs font-semibold px-2.5 py-0.5 rounded-full mr-2 mb-1 sm:mb-2">Prep: ${recipe.prepTime}</span>
                         <span class="inline-block bg-lime-100 text-lime-700 text-xs font-semibold px-2.5 py-0.5 rounded-full mb-1 sm:mb-2">Cook: ${recipe.cookTime}</span>
                    </div>
                </div>
            `;
            card.addEventListener('click', () => showRecipeDetail(recipe.id));
            return card;
        }

        // Function to render recipes grouped by category
        function renderRecipesByCategory() {
            console.log("Rendering recipes by category..."); 
            if (!recipeCategoriesContainer) {
                console.error("recipeCategoriesContainer element not found! Cannot render recipes.");
                return; 
            }
            recipeCategoriesContainer.innerHTML = ''; 

            const categories = {};
            recipeData.forEach(recipe => {
                if (!recipe.category) {
                    console.warn("Recipe missing category:", recipe.name);
                    return; 
                }
                if (!categories[recipe.category]) {
                    categories[recipe.category] = [];
                }
                categories[recipe.category].push(recipe);
            });

            const categoryOrder = ["Breakfast", "Salads", "Dinner", "Dessert"]; 
            let categoriesRendered = 0; 

            for (const categoryName of categoryOrder) {
                if (categories[categoryName] && categories[categoryName].length > 0) {
                    const recipes = categories[categoryName];
                    const categorySection = document.createElement('div');
                    categorySection.className = 'mb-12'; 
                    categorySection.id = `category-${categoryName.toLowerCase().replace(/\s+/g, '-')}`; 
                    
                    const title = document.createElement('h2');
                    title.className = 'category-title';
                    title.textContent = categoryName;
                    categorySection.appendChild(title);

                    const grid = document.createElement('div');
                    grid.className = 'grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8';
                    
                    recipes.forEach(recipe => {
                        const card = createRecipeCard(recipe);
                        grid.appendChild(card);
                    });
                    categorySection.appendChild(grid);
                    recipeCategoriesContainer.appendChild(categorySection);
                    categoriesRendered++;
                }
            }
            
            for (const categoryName in categories) {
                if (!categoryOrder.includes(categoryName) && categories[categoryName] && categories[categoryName].length > 0) {
                    const recipes = categories[categoryName];
                    const categorySection = document.createElement('div');
                    categorySection.className = 'mb-12';
                    categorySection.id = `category-${categoryName.toLowerCase().replace(/\s+/g, '-')}`;
                    
                    const title = document.createElement('h2');
                    title.className = 'category-title';
                    title.textContent = categoryName;
                    categorySection.appendChild(title);

                    const grid = document.createElement('div');
                    grid.className = 'grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8';
                    
                    recipes.forEach(recipe => {
                        const card = createRecipeCard(recipe);
                        grid.appendChild(card);
                    });
                    categorySection.appendChild(grid);
                    recipeCategoriesContainer.appendChild(categorySection);
                    categoriesRendered++;
                }
            }
            if (categoriesRendered === 0) {
                console.warn("No categories were rendered. Check recipeData and categoryOrder. Is recipeCategoriesContainer empty or not found?");
            } else {
                console.log(categoriesRendered + " categories rendered successfully."); 
            }
        }

        // Function to show recipe detail view
        function showRecipeDetail(recipeId) {
            const recipe = recipeData.find(r => r.id === recipeId);
            if (!recipe) {
                console.error("Recipe not found for ID:", recipeId);
                return;
            }
            if (!recipeDetailContent || !homepageView || !recipeDetailView) {
                console.error("One or more detail view elements are not found.");
                return;
            }

            // Function to create checklist items for ingredients or instructions
function createChecklistItems(items, type, recipeIdPrefix) {
    if (!Array.isArray(items)) return ''; // Handle cases where items might not be an array
    
    return items.map((itemObj, index) => {
        // Check if the item is a header (for ingredients list)
        if (type === 'ingredient' && itemObj.isHeader) {
            // Render as a header: bold, no checkbox, slightly more margin
            return `<li class="mt-3 mb-1 font-semibold text-gray-800 text-md">${itemObj.item}</li>`;
        } else {
            // Render as a regular checklist item (ingredient or instruction)
            const itemId = `${recipeIdPrefix}-${type}-${index}`;
            // Determine the display text: if it's an object with item/quantity, format it, otherwise use the string directly.
            const displayText = (typeof itemObj === 'object' && itemObj.item) 
                                ? `<strong>${itemObj.item}:</strong> ${itemObj.quantity || ''}` 
                                : (typeof itemObj === 'string' ? itemObj : '');

            return `
                <li class="mb-2 flex items-start">
                    <input type="checkbox" id="${itemId}" class="custom-checkbox opacity-0 absolute h-6 w-6 cursor-pointer mt-1" />
                    <label for="${itemId}" class="text-gray-700 select-none cursor-pointer flex-1 relative pl-8">
                        ${displayText}
                    </label>
                </li>
            `;
        }
    }).join('');
}
            
            recipeDetailContent.innerHTML = `
                <img src="${recipe.image}" alt="${recipe.name}" class="w-full h-64 md:h-80 object-cover rounded-lg mb-6 shadow-md" onerror="this.onerror=null;this.src='${recipe.placeholderImage}';">
                <h2 class="text-4xl font-bold text-green-700 mb-3">${recipe.name}</h2>
                <p class="text-gray-600 mb-6 text-lg">${recipe.description}</p>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8 text-center">
                    <div class="bg-gray-50 p-4 rounded-lg shadow">
                        <p class="text-sm font-medium text-gray-500">YIELDS</p>
                        <p class="text-xl font-semibold text-gray-700">${recipe.yields || 'N/A'}</p>
                    </div>
                    <div class="bg-lime-50 p-4 rounded-lg shadow">
                        <p class="text-sm font-medium text-lime-500">PREP TIME</p>
                        <p class="text-xl font-semibold text-lime-700">${recipe.prepTime || 'N/A'}</p>
                    </div>
                    <div class="bg-emerald-50 p-4 rounded-lg shadow">
                        <p class="text-sm font-medium text-emerald-500">COOK TIME</p>
                        <p class="text-xl font-semibold text-emerald-700">${recipe.cookTime || 'N/A'}</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                    <div>
                        <h3 class="text-2xl font-semibold text-gray-700 mb-4 border-b-2 border-gray-300 pb-2">Ingredients</h3>
                        <ul class="list-none pl-0">
                            ${createChecklistItems(recipe.ingredients, 'ingredient', recipe.id)}
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-2xl font-semibold text-gray-700 mb-4 border-b-2 border-lime-300 pb-2">Equipment</h3>
                        <ul class="list-disc list-inside text-gray-700 pl-0">
                            ${(Array.isArray(recipe.equipment) ? recipe.equipment.map(item => `<li class="mb-1">${item}</li>`).join('') : 'N/A')}
                        </ul>
                    </div>
                </div>

                <div>
                    <h3 class="text-2xl font-semibold text-gray-700 mb-4 border-b-2 border-emerald-300 pb-2">Instructions</h3>
                    <ol class="list-none pl-0 space-y-3">
                        ${createChecklistItems(recipe.instructions, 'instruction', recipe.id)}
                    </ol>
                </div>

                ${recipe.tips && Array.isArray(recipe.tips) && recipe.tips.length > 0 ? `
                <div class="mt-8 bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-md">
                    <h3 class="text-xl font-semibold text-yellow-700 mb-3">Chef's Tips</h3>
                    <ul class="list-disc list-inside text-yellow-700 pl-1 space-y-1">
                        ${recipe.tips.map(tip => `<li>${tip}</li>`).join('')}
                    </ul>
                </div>
                ` : ''}
            `;

            homepageView.classList.add('hidden');
            recipeDetailView.classList.remove('hidden');
            window.scrollTo(0, 0);
        }

        // Function to show homepage view
        function showHomepage() {
            if (recipeDetailView) recipeDetailView.classList.add('hidden');
            if (homepageView) homepageView.classList.remove('hidden');
            if (navButtons) {
                navButtons.forEach(btn => btn.classList.remove('active-nav', 'text-green-700', 'bg-green-100', 'font-semibold'));
            }
        }
        
        // --- INITIALIZATION & EVENT LISTENERS ---
        document.addEventListener('DOMContentLoaded', () => {
            console.log("DOM fully loaded and parsed. Initializing elements and listeners.");

            // Initialize DOM elements here, after DOM is loaded
            recipeCategoriesContainer = document.getElementById('recipeCategoriesContainer');
            homepageView = document.getElementById('homepageView');
            recipeDetailView = document.getElementById('recipeDetailView');
            recipeDetailContent = document.getElementById('recipeDetailContent');
            backButton = document.getElementById('backButton');
            currentYearSpan = document.getElementById('currentYear');
            categoryNavElement = document.getElementById('categoryNav');
            navButtons = document.querySelectorAll('#categoryNav .nav-button');

            // Check if all essential elements are found
            if (!recipeCategoriesContainer) console.error("Initialization Error: recipeCategoriesContainer not found.");
            if (!homepageView) console.error("Initialization Error: homepageView not found.");
            if (!recipeDetailView) console.error("Initialization Error: recipeDetailView not found.");
            if (!recipeDetailContent) console.error("Initialization Error: recipeDetailContent not found.");
            if (!backButton) console.error("Initialization Error: backButton not found.");
            if (!categoryNavElement) console.error("Initialization Error: categoryNavElement not found.");
            if (!navButtons || navButtons.length === 0) console.warn("Initialization Warning: No navigation buttons found with selector '#categoryNav .nav-button'.");


            renderRecipesByCategory(); // Render recipes on initial load

            if(currentYearSpan) {
                currentYearSpan.textContent = new Date().getFullYear();
            } else {
                console.warn("currentYearSpan element not found during initialization.");
            }

            // Setup Back Button Listener
            if (backButton) {
                backButton.addEventListener('click', showHomepage);
            }

            // Setup Navigation Buttons Logic
            if (navButtons && navButtons.length > 0) {
                navButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        const categoryName = button.dataset.category;
                        if (!categoryName) {
                            console.warn("Button is missing data-category attribute", button);
                            return;
                        }
                        const categoryId = `category-${categoryName.toLowerCase().replace(/\s+/g, '-')}`;

                        // Ensure homepageView is defined and accessible
                        if (homepageView && homepageView.classList.contains('hidden')) {
                            showHomepage(); 
                        }

                        requestAnimationFrame(() => {
                            const targetSection = document.getElementById(categoryId);

                            if (targetSection) {
                                let navBarHeight = 0;
                                if (categoryNavElement && getComputedStyle(categoryNavElement).position === 'sticky') {
                                    navBarHeight = categoryNavElement.offsetHeight;
                                }
                                
                                const targetPosition = targetSection.getBoundingClientRect().top + window.pageYOffset - navBarHeight - 20; 

                                window.scrollTo({
                                    top: targetPosition,
                                    behavior: 'smooth'
                                });

                                navButtons.forEach(btn => btn.classList.remove('active-nav', 'text-green-700', 'bg-green-100', 'font-semibold'));
                                button.classList.add('active-nav', 'text-green-700', 'bg-green-100', 'font-semibold');
                            } else {
                                console.warn(`Target section with ID "${categoryId}" not found after attempting to switch to homepage. Check if the category exists and has recipes.`);
                            }
                        });
                    });
                });
            }
        });
    </script>
</body>
</html>
